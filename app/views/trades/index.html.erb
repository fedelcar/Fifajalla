<div class="container">
  <div class="row">
    <h1>Completed Trades</h1>
  </div>
  
  <table class="table table-striped table-hover ">
      <thead><tr>
        <th>ID</th>
        <th>Fecha</th>
        <th>User 1</th>
        <th>User 2</th>
        <th>Jugadores a User 1</th>
        <th>Jugadores a User 2</th>

      </tr></thead>
      
      <% @trades.each do |trade| %>
      <tbody><tr>

        
        
          <% @pm = Player_Movement.where("trade_id=?",trade.id) %>
          <td><%= trade.id %></td>
          <td><%= trade.created_at.to_date %></td>
          <td><%= User.find(@pm.first.second_user_id).display_name %></td>
          <td><%= User.find(@pm.first.first_user_id).display_name %></td>
          <td> <% @pm1= Player_Movement.where("trade_id=? and first_user_id=?",trade.id,@pm.first.first_user_id) %>
              <table class="table">
                <% @pm1.each do |pm1| %>
                  <tr><td><%= Player.find(pm1.player_id).last_name %></td></tr>
                <%end%>
              </table>
          </td>
          <td> <% @pm2= Player_Movement.where("trade_id=? and first_user_id=?",trade.id,@pm.first.second_user_id) %>
              <table class="table">
                <% @pm2.each do |pm2| %>
                  <tr><td><%= Player.find(pm2.player_id).last_name %></td></tr>
                <%end%>
              </table>
          </td>
        
      </tr></tbody>
      <% end %>
    </table>


  
  
</div>
